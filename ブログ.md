### フォルダ構成 app

app
(auth)・・認証関係 ⇒かっこを付けるとURLとしては影響しない、グループとして扱い
login/page.tsx
register/page.tsx
layout.tsx
(public)・・ログインなしでもみれる
　 posts/page.tsx トップページ・記事一覧
posts/[id]/page.tsx 記事詳細
posts/layout.tsx
(private)・・ログイン後
manage/ ・・ログイン後とわかりやすくする
dashboard/page.tsx ダッシュボード
posts/page.tsx 記事管理
create/page.tsx 新規記事
[id]/page.tsx 記事プレビュー
[id]/edit/page.tsx 記事編集



### Prisma インストール
パスワードも扱うため暗号化のbcryptjsもインストール
npm install prisma@^6 @prisma/client@^6
npm install -D ts-node@^10
npm install bcryptjs@^2
npm install @types/bcryptjs@^2


### Prismaの設定
npx prisma init // Prismaの初期化
prisma/schema.prismaと.envが生成される
prisma/schema.prismaの設定
provider= "sqlite" に変更 (ファイルベース 開発向けDB)
.env ファイル
postgresqlはコメントアウト
DATABASE_URL="file:./dev.db" を追記


### Prisma クライアントインスタンス
lib/prisma.ts
import { PrismaClient } from '@prisma/client'
// グローバルスコープでPrismaインスタンスを保持できる場所を作る
const globalForPrisma = globalThis as unknown as {
prisma: PrismaClient | undefined
}
// Prismaインスタンスがあれば使う、なければ作成
export const prisma = globalForPrisma.prisma ?? new PrismaClient()
// 開発環境でのみ使用
if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma


### 画像を扱う場合は、next.config.tsに追記
import type { NextConfig } from "next";
const nextConfig: NextConfig = {
images: {
remotePatterns: [
{
protocol: 'https',
hostname: 'picsum.photos',
},
],
}
}

`コマンドでダミーデータも追加できるように package.jsonに追加`
"prisma": {
   "ts-node --compiler-options{\"module\":\"CommonJS\"} prisma/seed.ts"
  },


### マイグレーションとシード実行
// マイグレーション(テーブル作成)
npx prisma migrate dev --name init
// 単独で実行する場合はシード実行(ダミーデータ)
npx prisma db seed
// DBの内容を確認
npx prisma studio
// DBリセット
npx prisma migrate reset


### shadcn/ui インストール・設定
npx shadcn@latest init
必要なコンポーネントをインストール
npx shadcn@latest add navigation-menu button input label alert dropdown-menu alert-dialog
src/components/uiに各コンポーネントがインストールされる